<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SWAP Workouts Viewer</title>
  <!-- Minimal modern framework (Pico.css) for clean, lightweight UI -->
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@1.*/css/pico.min.css">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div style="display:flex;align-items:center;gap:14px">
        <h1>SWAP</h1>
        <nav aria-label="Main navigation">
          <a href="index.html">Bibliothèque</a>
          <a href="plans.html">Plans</a>
        </nav>
      </div>
      <div class="controls" style="margin-left:auto;display:flex;gap:8px;align-items:center">
        <label for="librarySelect">Bibliothèque :</label>
        <select id="librarySelect">
          <option value="workout_library_enriched.json">workout_library_enriched.json</option>
        </select>
        <input id="search" placeholder="Rechercher par nom, type ou tag" />
        <select id="filterPurpose" title="Filtrer par objectif">
          <option value="">Tous les objectifs</option>
        </select>
        <div id="multiFilter" class="multi-filter">
          <button id="toggleFilters">Filtres objectifs ▾</button>
          <div id="filterList" class="filter-list hidden"></div>
        </div>
      </div>
    </div>
  </header>
  <main>
    <aside id="listPane">
      <ul id="workoutList"></ul>
      <div class="list-actions">
        <button id="selectAll">Tout sélectionner</button>
        <button id="clearSelection">Tout désélectionner</button>
        <button id="exportSelectedBulk">Exporter sélection (events/bulk ZWO)</button>
      </div>
    </aside>
    <section id="detailPane">
      <div id="empty" class="placeholder">Sélectionnez un workout pour voir les détails</div>
      <div id="workoutDetail" class="hidden">
        <h2 id="wName"></h2>
            <div class="detail-actions">
              <button id="exportJson">Exporter JSON (Intervals.icu)</button>
              <button id="exportZwo">Exporter ZWO (Zwift XML)</button>
            </div>
        <div class="meta">
          <span id="wCategory"></span>
          <span id="wType"></span>
          <span id="wDate"></span>
          <span id="wExternal"></span>
        </div>
        <h3>But / Objectif</h3>
        <p id="wPurpose"></p>
        <h3>Résumé</h3>
        <p id="wSummary"></p>
        <h3>Effets physiologiques</h3>
        <p id="wEffects"></p>
        <h3>Description / Notes</h3>
        <pre id="wDescription"></pre>
        <h3>Structure (steps)</h3>
        <div id="wSteps"></div>
      </div>
    </section>
  </main>
  <footer>
    <small>Fichier chargé : <span id="loadedFile">aucun</span></small>
  </footer>

  <script src="app.js"></script>
  <script>
    // Highlight the active nav link (simple, works on GitHub Pages)
    (function(){
      try{
        const anchors = document.querySelectorAll('header nav a');
        anchors.forEach(a=>{
          const href = a.getAttribute('href');
          if(window.location.pathname.endsWith(href) || window.location.pathname===('/'+href)){
            a.classList.add('active');
          }
        });
      }catch(e){/*ignore*/}
    })();
  </script>
</body>
</html>